# Разработка датчика температуры
## Цель проекта
Создать android-приложение для управлением датчиком температуры

## Задачи
1. Собрать физическую модель установки
2. Установить и настроить систему на устройство RaspberryPi
3. Изучить механизм работы с интерфейса GPIO
4. Требуется разработать сервер для связи и обработки запросов между мобильным приложением и датчиком
5. Написать приложение на java (Android Studio) для передачи запросов на веб-сервер

## Сервер
### Cодержит 5 основных файлов:
1.	App.js – запуск сервера на NodeJs
2.	Index.js – содержит route для мобильного приложения и raspberry pi, к которым они обращаются
3.	mainController.js – содержит код для обработки данных перед отправкой к получателю
4.	choice_temperature.txt – текстовый файл содержащий выбранную температуру
5.	actual_temperature.txt – текстовыый файл содержащий текущую температуру

### RaspberryPi и Датчик:

1.	``api/device/:temperature`` – получает температуру с мобильного приложения и записывает данные в файл с выбранной температурой.
Функция отвечающая за обработку и запись данных в mainController «temperatureFromDevice».

2.	``api/raspberrypi/:temperature`` – получает температуру с raspberry pi и записывает данные в файл с актуальной температурой.
Функция отвечающая за обработку и запись данных в mainController «temperatureFromRaspberrypi».

3.	``api/actual/raspberrypi/`` - отправляет актуальную температуру из текстового файла  в мобильное приложение.
Функция отвечающая за обработку и запись данных в mainController «temperatureFromRaspberrypiOnDevice».

4.	``api/ /choice/raspberrypi/`` - отправляет выбранную температуру из текстового файла на raspberry pi.
Функция отвечающая за обработку и запись данных в mainController «temperatureOnRaspberrypi».


## Мобильное приложение
### Cодержит 2 основных файла: 
1.	FirstFragment.java – содержит логику приложения
2.	fragment_first.xml – содержит данные по внешнему виду приложения

Созданы классы setTemperatureSensor и getTemperatureSensor для отправки выбранной температуры и получения актуальной температуры соответвсвенно. При открытии приложения запускается таймер, срабатывающий каждые 5 секунд. С его помощью срабатывает запрос на получение актуальной температуры, после чего обновляется поле для отображения актуальной температуры.

При нажатии на кнопку обновления выбранной температуры, срабатывает запрос на изменение выбранной температуры.
Если интернет отсутствует, то приложение не ломается, а продолжает посылать запросы, до тех пор, пока не появится интернет.
Ниже продемонстрирован интерфейс мобильного приложения:

<p align="center">
  <![image](https://github.com/tomilko/TempSensor/assets/60338607/95178ed8-dc28-457f-b557-a47f3445c397)>
</p>

## Raspberry Pi
### Cодержит 2 основных файла: 
1.	Crontab.txt – скрипт для ежеминутного обновления температуры
2.	actual_temperature.sh – скрипт для получения температуры

## Результаты
По итогу, были разработаны: сервер на js, скрипты на bash и мобильное приложение. С помощью мобильного приложения можно отслеживать текущую температуру датчика, а также задавать требуемую температуру. 
Для правильной работы приложения все устройства должны находиться в одной сети.

## Состав группы Рис-20-1б
Томилов В.А. (tomilko) - разработка тела сервера и маршрутизатора, а также скриптов для Raspberry Pi
Ахматнурова О.Ф. (olya180900) - разработка мобильного приложения
Каспатов А.С. (Kaspatov) - разработка контроллера, содержащего описание поведения сервера + помощь в разработке мобильного приложения
