# Датчик Температуры
## Backend
### Cодержит 5 основных файлов:
1.	App.js – запуск сервера на NodeJs
2.	Index.js – содержит route для мобильного приложения и raspberry pi, к которым они обращаются
3.	mainController.js – содержит код для обработки данных перед отправкой к получателю
4.	choice_temperature.txt – текстовый файл содержащий выбранную температуру
5.	actual_temperature.txt – текстовыый файл содержащий текущую температуру

### Api:

1.	``api/device/:temperature`` – получает температуру с мобильного приложения и записывает данные в файл с выбранной температурой.
Функция отвечающая за обработку и запись данных в mainController «temperatureFromDevice».

2.	``api/raspberrypi/:temperature`` – получает температуру с raspberry pi и записывает данные в файл с актуальной температурой.
Функция отвечающая за обработку и запись данных в mainController «temperatureFromRaspberrypi».

3.	``api/actual/raspberrypi/`` - отправляет актуальную температуру из текстового файла  в мобильное приложение.
Функция отвечающая за обработку и запись данных в mainController «temperatureFromRaspberrypiOnDevice».

4.	``api/ /choice/raspberrypi/`` - отправляет выбранную температуру из текстового файла на raspberry pi.
Функция отвечающая за обработку и запись данных в mainController «temperatureOnRaspberrypi».


Ниже продемонстрирован запуск сервера:

<p align="center">
  <img src="https://github.com/BigKeksik/TemperatureSensor/assets/50041323/7355ebd1-90e5-4d4e-90dc-6794a44abd10" />
</p>

## Frontend
### Cодержит 2 основных файла: 
1.	FirstFragment.java – содержит логику приложения
2.	fragment_first.xml – содержит данные по внешнему виду приложения

Созданы классы setTemperatureSensor и getTemperatureSensor для отправки выбранной температуры и получения актуальной температуры соответвсвенно.
При открытии приложения запускается таймер, срабатывающий каждые 5 секунд. С его помощью срабатывает запрос на получение актуальной температуры, после чего обновляется поле для отображения актуальной температуры.

При нажатии на кнопку обновления выбранной температуры, срабатывает запрос на изменение выбранной температуры.

Если интернет отсутствует, то приложение не ломается, а продолжает посылать запросы, до тех пор, пока не появится интернет.

Ниже продемонстрирован интерфейс мобильного приложения:

<p align="center">
  <img src="https://github.com/BigKeksik/TemperatureSensor/assets/50041323/4c4c4475-5cd2-4bf7-8461-68fa85cff5ff" />
</p>

## Raspberry Pi
### Cодержит 2 основных файла: 
1.	Crontab.txt – содержит интервал срабатывания крона
2.	actual_temperature.sh – содержит скрипт для получения температуры с датчика

## Для работы необходимо:
1.  Чтобы все устройства находились в одной сети
2.  Изменить url запросов на актуальный ip
